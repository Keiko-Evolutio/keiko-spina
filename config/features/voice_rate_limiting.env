
# =============================================================================
# KEIKO VOICE RATE LIMITING CONFIGURATION - TRANSPARENT & KONFIGURIERBAR
# =============================================================================
# üéØ TRANSPARENTE KONFIGURATION: Alle Rate Limiting-Einstellungen an einem Ort
# üö® DEVELOPMENT MODE: Voice Rate Limiting ist DEAKTIVIERT f√ºr optimale Entwicklung
# üîß PRODUCTION READY: Einfach auf true setzen f√ºr Production-Deployment

# =============================================================================
# MASTER CONTROL - HAUPTSCHALTER
# =============================================================================
# üî¥ DEVELOPMENT: false (keine Rate Limits)
# üü¢ PRODUCTION: true (Rate Limits aktiv)
KEI_VOICE_RATE_LIMITING_ENABLED=false

# =============================================================================
# REDIS BACKEND KONFIGURATION
# =============================================================================
# Redis f√ºr persistente Rate Limiting-Daten (empfohlen f√ºr Production)
KEI_VOICE_RATE_LIMITING_REDIS_ENABLED=false
KEI_VOICE_RATE_LIMITING_REDIS_URL=redis://localhost:6379

# =============================================================================
# DEVELOPMENT MODE EINSTELLUNGEN
# =============================================================================
# Development Mode - √úberschreibt alle anderen Einstellungen
KEI_VOICE_RATE_LIMITING_DEVELOPMENT_MODE=true
KEI_VOICE_RATE_LIMITING_DEBUG_LOGGING=true

# Transparente Logging-Einstellungen
KEI_VOICE_RATE_LIMITING_LOG_BLOCKED_REQUESTS=true
KEI_VOICE_RATE_LIMITING_LOG_LEVEL=DEBUG

# =============================================================================
# RATE LIMITING ALGORITHMUS KONFIGURATION
# =============================================================================
# Algorithmus-Auswahl: sliding_window, token_bucket, fixed_window, leaky_bucket
KEI_VOICE_RATE_LIMITING_ALGORITHM=sliding_window

# Token Bucket spezifische Einstellungen
KEI_VOICE_RATE_LIMITING_TOKEN_BUCKET_BURST_MULTIPLIER=2.0
KEI_VOICE_RATE_LIMITING_TOKEN_BUCKET_REFILL_RATE=1.0

# Sliding Window spezifische Einstellungen
KEI_VOICE_RATE_LIMITING_SLIDING_WINDOW_PRECISION=10

# Performance-Optimierungen
KEI_VOICE_RATE_LIMITING_BATCH_SIZE=100
KEI_VOICE_RATE_LIMITING_CLEANUP_INTERVAL_SECONDS=300

# =============================================================================
# GLOBALE RATE LIMITS (nur aktiv wenn enabled=true)
# =============================================================================
# Globale Systemlimits - sch√ºtzen vor √úberlastung
KEI_VOICE_RATE_LIMITING_GLOBAL_REQUESTS_PER_MINUTE=10000
KEI_VOICE_RATE_LIMITING_GLOBAL_CONCURRENT_CONNECTIONS=1000

# =============================================================================
# GRANULARE ZEITFENSTER-BASIERTE LIMITS
# =============================================================================
# Flexible Zeitfenster f√ºr pr√§zise Rate Limiting-Kontrolle

# Speech-to-Text (STT) Limits
KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_MINUTE=60
KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_HOUR=1000
KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_DAY=10000

# Text-to-Speech (TTS) Limits
KEI_VOICE_RATE_LIMITING_TTS_REQUESTS_PER_MINUTE=30
KEI_VOICE_RATE_LIMITING_TTS_REQUESTS_PER_HOUR=500
KEI_VOICE_RATE_LIMITING_TTS_REQUESTS_PER_DAY=5000

# Realtime Streaming Limits
KEI_VOICE_RATE_LIMITING_STREAMING_REQUESTS_PER_MINUTE=10
KEI_VOICE_RATE_LIMITING_STREAMING_REQUESTS_PER_HOUR=100
KEI_VOICE_RATE_LIMITING_STREAMING_REQUESTS_PER_DAY=1000

# WebSocket Connection Limits
KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_MINUTE=3
KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_HOUR=20
KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_DAY=100

# Agent Execution Limits
KEI_VOICE_RATE_LIMITING_AGENT_EXECUTIONS_PER_MINUTE=20
KEI_VOICE_RATE_LIMITING_AGENT_EXECUTIONS_PER_HOUR=200
KEI_VOICE_RATE_LIMITING_AGENT_EXECUTIONS_PER_DAY=2000

# Tool Call Limits
KEI_VOICE_RATE_LIMITING_TOOL_CALLS_PER_MINUTE=50
KEI_VOICE_RATE_LIMITING_TOOL_CALLS_PER_HOUR=500
KEI_VOICE_RATE_LIMITING_TOOL_CALLS_PER_DAY=5000

# =============================================================================
# LEGACY USER-BASIERTE LIMITS (Abw√§rtskompatibilit√§t)
# =============================================================================
# Diese Werte werden verwendet wenn granulare Zeitfenster nicht konfiguriert sind
KEI_VOICE_RATE_LIMITING_USER_STT_LIMIT=1000
KEI_VOICE_RATE_LIMITING_USER_TTS_LIMIT=1000
KEI_VOICE_RATE_LIMITING_USER_STREAMING_LIMIT=1000
KEI_VOICE_RATE_LIMITING_USER_WEBSOCKET_CONNECTIONS=100
KEI_VOICE_RATE_LIMITING_USER_AGENT_EXECUTIONS_LIMIT=1000
KEI_VOICE_RATE_LIMITING_USER_TOOL_CALLS_LIMIT=1000

# Session-basierte Limits
KEI_VOICE_RATE_LIMITING_SESSION_WORKFLOW_STARTS_LIMIT=100
KEI_VOICE_RATE_LIMITING_SESSION_AUDIO_UPLOADS_LIMIT=200
KEI_VOICE_RATE_LIMITING_SESSION_TEXT_INPUTS_LIMIT=500

# IP-basierte Limits
KEI_VOICE_RATE_LIMITING_IP_REQUESTS_PER_MINUTE=200
KEI_VOICE_RATE_LIMITING_IP_CONCURRENT_CONNECTIONS=10

# User-Tier Multiplier
KEI_VOICE_RATE_LIMITING_ANONYMOUS_MULTIPLIER=0.5
KEI_VOICE_RATE_LIMITING_STANDARD_MULTIPLIER=1.0
KEI_VOICE_RATE_LIMITING_PREMIUM_MULTIPLIER=2.0
KEI_VOICE_RATE_LIMITING_ENTERPRISE_MULTIPLIER=5.0

# Adaptive Rate Limiting
KEI_VOICE_RATE_LIMITING_ADAPTIVE_ENABLED=true
KEI_VOICE_RATE_LIMITING_CPU_THRESHOLD=0.8
KEI_VOICE_RATE_LIMITING_MEMORY_THRESHOLD=0.8
KEI_VOICE_RATE_LIMITING_PEAK_HOURS_START=9
KEI_VOICE_RATE_LIMITING_PEAK_HOURS_END=17
KEI_VOICE_RATE_LIMITING_PEAK_HOURS_MULTIPLIER=0.7

# Burst-Konfiguration
KEI_VOICE_RATE_LIMITING_BURST_ENABLED=true
KEI_VOICE_RATE_LIMITING_BURST_MULTIPLIER=1.5

# Monitoring
KEI_VOICE_RATE_LIMITING_MONITORING_ENABLED=true
KEI_VOICE_RATE_LIMITING_ALERT_THRESHOLD=0.9

# =============================================================================
# VOICE RATE LIMITING EXAMPLES
# =============================================================================

# Beispiel-Konfiguration f√ºr Development (niedrigere Limits)
# KEI_VOICE_RATE_LIMITING_USER_STT_LIMIT=10
# KEI_VOICE_RATE_LIMITING_USER_TTS_LIMIT=5
# KEI_VOICE_RATE_LIMITING_USER_STREAMING_LIMIT=2

# Beispiel-Konfiguration f√ºr Production (h√∂here Limits)
# KEI_VOICE_RATE_LIMITING_USER_STT_LIMIT=120
# KEI_VOICE_RATE_LIMITING_USER_TTS_LIMIT=60
# KEI_VOICE_RATE_LIMITING_USER_STREAMING_LIMIT=20

# Beispiel-Konfiguration f√ºr High-Traffic (sehr hohe Limits)
# KEI_VOICE_RATE_LIMITING_GLOBAL_REQUESTS_PER_MINUTE=5000
# KEI_VOICE_RATE_LIMITING_GLOBAL_CONCURRENT_CONNECTIONS=500
# KEI_VOICE_RATE_LIMITING_USER_STT_LIMIT=300
# KEI_VOICE_RATE_LIMITING_USER_TTS_LIMIT=150

# Redis Cluster Konfiguration (f√ºr High Availability)
# KEI_VOICE_RATE_LIMITING_REDIS_URL=redis://redis-cluster-1:6379,redis://redis-cluster-2:6379,redis://redis-cluster-3:6379

# =============================================================================
# TRANSPARENTE KONFIGURATION - QUICK REFERENCE
# =============================================================================

# üöÄ DEVELOPMENT SETUP (aktuell aktiv):
# KEI_VOICE_RATE_LIMITING_ENABLED=false
# - Keine Rate Limits
# - Optimale Entwicklungsgeschwindigkeit
# - Vollst√§ndige WebSocket-Funktionalit√§t

# üè≠ PRODUCTION SETUP (f√ºr Live-Deployment):
# KEI_VOICE_RATE_LIMITING_ENABLED=true
# KEI_VOICE_RATE_LIMITING_REDIS_ENABLED=true
# KEI_VOICE_RATE_LIMITING_ALGORITHM=sliding_window
#
# # Granulare Zeitfenster-Limits
# KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_MINUTE=60
# KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_HOUR=1000
# KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_DAY=10000
# KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_MINUTE=5
# KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_HOUR=30
# KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_DAY=200

# üîß TESTING SETUP (f√ºr Load-Tests):
# KEI_VOICE_RATE_LIMITING_ENABLED=true
# KEI_VOICE_RATE_LIMITING_ALGORITHM=token_bucket
# KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_MINUTE=500
# KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_HOUR=5000
# KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_MINUTE=50

# üéØ STAGING SETUP (f√ºr Pre-Production):
# KEI_VOICE_RATE_LIMITING_ENABLED=true
# KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_MINUTE=100
# KEI_VOICE_RATE_LIMITING_STT_REQUESTS_PER_HOUR=2000
# KEI_VOICE_RATE_LIMITING_WEBSOCKET_CONNECTIONS_PER_MINUTE=10

# =============================================================================
# TROUBLESHOOTING
# =============================================================================
# ‚ùå WebSocket-Fehler "rate limit exceeded":
#    -> Setzen Sie KEI_VOICE_RATE_LIMITING_ENABLED=false
#    -> Oder erh√∂hen Sie KEI_VOICE_RATE_LIMITING_USER_WEBSOCKET_CONNECTIONS
#
# ‚ö° Performance-Probleme:
#    -> Aktivieren Sie Redis: KEI_VOICE_RATE_LIMITING_REDIS_ENABLED=true
#    -> Erh√∂hen Sie globale Limits
#
# üîç Debugging:
#    -> Setzen Sie KEI_VOICE_RATE_LIMITING_DEBUG_LOGGING=true
#    -> Pr√ºfen Sie Logs f√ºr "rate limit" Meldungen

# =============================================================================
# ENVIRONMENT-SPEZIFISCHE KONFIGURATION
# =============================================================================
# Diese Datei wird automatisch geladen wenn:
# - Die Environment-Variable KEI_VOICE_RATE_LIMITING_ENABLED gesetzt ist
# - Oder die Anwendung startet und diese Datei existiert
#
# Priorit√§t (h√∂chste zuerst):
# 1. Direkte Environment-Variablen
# 2. .env.voice_rate_limiting (diese Datei)
# 3. Default-Werte im Code
